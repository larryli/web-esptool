(function(e){function t(t){for(var n,c,i=t[0],u=t[1],o=t[2],l=0,f=[];l<i.length;l++)c=i[l],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&f.push(a[c][0]),a[c]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);h&&h(t);while(f.length)f.shift()();return s.push.apply(s,o||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,c=1;c<r.length;c++){var u=r[c];0!==a[u]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},s=[];function c(e){return i.p+"js/"+({stub_flasher_32:"stub_flasher_32",stub_flasher_32c3:"stub_flasher_32c3",stub_flasher_32s2:"stub_flasher_32s2",stub_flasher_8266:"stub_flasher_8266"}[e]||e)+"."+{stub_flasher_32:"3eb5fc61",stub_flasher_32c3:"d9c35479",stub_flasher_32s2:"191a653e",stub_flasher_8266:"33027b7d"}[e]+".js"}function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],r=a[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=n);var s,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=c(e);var o=new Error;s=function(t){u.onerror=u.onload=null,clearTimeout(l);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;o.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",o.name="ChunkLoadError",o.type=n,o.request=s,r[1](o)}a[e]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:u})}),12e4);u.onerror=u.onload=s,document.head.appendChild(u)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],o=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var h=o;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"034f":function(e,t,r){"use strict";r("85ec")},1:function(e,t){},"10d6":function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return n}));r("99af"),r("fb6a");function n(t,r){t=e.concat([t,r]);var n=[],a=0,s=0,c=null;while(s<t.length)192==t[s]?(null==c?c=e.alloc(t.length):(n.push(c.slice(0,a)),c=null,a=0),s+=1):s<t.length-1&&219==t[s]&&220==t[s+1]?(null!=c&&(c[a]=192,a+=1),s+=2):s<t.length-1&&219==t[s]&&221==t[s+1]?(null!=c&&(c[a]=219,a+=1),s+=2):(null!=c&&(c[a]=t[s],a+=1),s+=1);return c=null!=c?e.concat([e.from([192]),c.slice(0,a)]):e.alloc(0),{queue:c,packets:n}}}).call(this,r("b639").Buffer)},2:function(e,t){},"3ca6":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("1da1");r("96cf"),r("d3b7");function a(e,t,r){return s.apply(this,arguments)}function s(){return s=Object(n["a"])(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){var s=function(t){clearTimeout(c),e(t)},c=setTimeout((function(){t.removeListener(r,s),a(new Error("Timeout"))}),n);t.once(r,s)})));case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}},4678:function(e,t,r){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=s(e);return r(t)}function s(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=s,e.exports=a,a.id="4678"},"59b6":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("d3b7");function n(e){return new Promise((function(t){return setTimeout(t,e)}))}},"85ec":function(e,t,r){},8672:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r("4d90"),r("d3b7"),r("25f0");function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return"0x".concat(e.toString(16).padStart(2*t,"0"))}},9431:function(e,t,r){"use strict";(function(e,n){r.d(t,"a",(function(){return h}));var a=r("1da1"),s=(r("96cf"),r("130f"),r("d3b7"),r("8a79"),r("3022")),c=r("2b0c"),i=r.n(c),u=r("15d1"),o=Object(s["promisify"])(i.a.fromBuffer);function l(e){return new Promise((function(t){var r=function(r){e.removeListener("end",n),t(r)},n=function(){e.removeListener("entry",r),t(null)};e.once("entry",r),e.once("end",n),e.readEntry()}))}function h(e){return f.apply(this,arguments)}function f(){return f=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,a,c,i,h,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,t.arrayBuffer();case 3:return e.t1=e.sent,r=e.t0.from.call(e.t0,e.t1),e.next=7,o(r,{lazyEntries:!0});case 7:a=e.sent,c=Object(s["promisify"])(a.openReadStream.bind(a)),i={};case 10:return e.next=12,l(a);case 12:if(e.t2=h=e.sent,null==e.t2){e.next=24;break}if(!h.fileName.endsWith("/")){e.next=16;break}return e.abrupt("continue",10);case 16:return e.next=18,c(h);case 18:return f=e.sent,e.next=21,Object(u["a"])(f).spoon();case 21:i["/".concat(h.fileName)]=e.sent,e.next=10;break;case 24:return e.abrupt("return",i);case 25:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}window.setImmediate=e.nextTick}).call(this,r("4362"),r("b639").Buffer)},c6c3:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return O}));var n=r("b85c"),a=r("1da1"),s=r("d4ec"),c=r("bee2"),i=r("ade3"),u=(r("99af"),r("d3b7"),r("25f0"),r("fb6a"),r("a15b"),r("b64b"),r("96cf"),r("3022")),o=r("faa1"),l=r.n(o),h=r("470b"),f=r.n(h),b=r("8672"),p=r("3ca6"),d=r("59b6"),_=r("eb8c"),j=r("10d6"),v=Object(u["promisify"])(f.a.unzip),g=Object(u["promisify"])(f.a.deflate),m="dataTerminalReady",E="requestToSend",O=function(){function t(r){Object(s["a"])(this,t),Object(i["a"])(this,"CHIP_NAME","Espressif device"),Object(i["a"])(this,"IS_STUB",!1),Object(i["a"])(this,"COMPRESS",!0),Object(i["a"])(this,"ESP_FLASH_BEGIN",2),Object(i["a"])(this,"ESP_FLASH_DATA",3),Object(i["a"])(this,"ESP_FLASH_END",4),Object(i["a"])(this,"ESP_MEM_BEGIN",5),Object(i["a"])(this,"ESP_MEM_END",6),Object(i["a"])(this,"ESP_MEM_DATA",7),Object(i["a"])(this,"ESP_SYNC",8),Object(i["a"])(this,"ESP_READ_REG",10),Object(i["a"])(this,"ESP_FLASH_DEFL_BEGIN",16),Object(i["a"])(this,"ESP_FLASH_DEFL_DATA",17),Object(i["a"])(this,"ESP_FLASH_DEFL_END",18),Object(i["a"])(this,"ESP_SPI_ATTACH",13),Object(i["a"])(this,"ESP_CHANGE_BAUDRATE",15),Object(i["a"])(this,"ESP_RAM_BLOCK",6144),Object(i["a"])(this,"FLASH_WRITE_SIZE",1024),Object(i["a"])(this,"ESP_IMAGE_MAGIC",233),Object(i["a"])(this,"ESP_CHECKSUM_MAGIC",239),Object(i["a"])(this,"FLASH_SECTOR_SIZE",4096),Object(i["a"])(this,"STATUS_BYTES_LENGTH",2),Object(i["a"])(this,"BOOTLOADER_FLASH_OFFSET",0),Object(i["a"])(this,"FLASH_SIZES",{}),Object(i["a"])(this,"USB_JTAG_SERIAL_PID",4097),Object(i["a"])(this,"port",void 0),Object(i["a"])(this,"reader",void 0),Object(i["a"])(this,"dispatcher",void 0),Object(i["a"])(this,"queue",void 0),Object(i["a"])(this,"usb_jtag_serial",!1),Object(i["a"])(this,"STUB_CLASS",void 0),Object(i["a"])(this,"_trace",void 0),this.port=r,this.dispatcher=new l.a,this.queue=e.alloc(0),this._trace=t.TRACE?function(e){return console.log("%cTRACE ".concat(e),"color: darkcyan")}:function(){return null}}return Object(c["a"])(t,[{key:"start",value:function(){this._read()}},{key:"release",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.reader){e.next=3;break}return e.next=3,this.reader.cancel();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_read",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var r,a,s,c,i,u,o,l,h,f,b,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==(r=this.port)&&void 0!==r&&r.readable){t.next=2;break}return t.abrupt("return");case 2:a=this.reader=this.port.readable.getReader(),t.prev=3;case 4:if(!this.reader){t.next=20;break}return t.next=7,a.read();case 7:if(s=t.sent,c=s.value,i=s.done,c&&!i){t.next=12;break}return t.abrupt("break",20);case 12:u=e.from(c),this._trace("Read ".concat(u.length," bytes: ").concat(u.toString("hex"))),o=Object(j["a"])(this.queue,u),l=o.queue,h=o.packets,this.queue=l,f=Object(n["a"])(h);try{for(f.s();!(b=f.n()).done;)p=b.value,this._dispatch(p)}catch(d){f.e(d)}finally{f.f()}t.next=4;break;case 20:return t.prev=20,a.releaseLock(),delete this.reader,t.finish(20);case 24:case"end":return t.stop()}}),t,this,[[3,,20,24]])})));function r(){return t.apply(this,arguments)}return r}()},{key:"_write",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object(_["a"])(t),this._trace("Write ".concat(t.length," bytes: ").concat(t.toString("hex"))),n=null===(r=this.port.writable)||void 0===r?void 0:r.getWriter(),!n){e.next=7;break}return e.next=6,n.write(t);case 6:n.releaseLock();case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_dispatch",value:function(e){if(!(e.length<8)&&1==e[0]){var t=e[1],r=e.readUInt16LE(2),n=e.readUInt32LE(4);e=e.slice(8),this._trace("< res op=".concat(Object(b["a"])(t)," len=").concat(r," val=").concat(n," data=").concat(e.toString("hex"))),this.dispatcher.emit("res:".concat(t),{val:n,data:e})}}},{key:"command",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r,n){var a,s,c,i,u,o,l=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=l.length>2&&void 0!==l[2]?l[2]:0,s=l.length>3&&void 0!==l[3]?l[3]:500,c=l.length>4&&void 0!==l[4]?l[4]:5,this._trace("> req op=".concat(Object(b["a"])(r)," len=").concat(n.length," data=").concat(n.toString("hex"))),i=e.alloc(8),i[0]=0,i[1]=r,i.writeUInt16LE(n.length,2),i.writeUInt32LE(a,4),u=e.concat([i,n]),o=0;case 11:if(!(o<c)){t.next=25;break}return t.prev=12,t.next=15,this._write(u);case 15:return t.next=17,Object(p["a"])(this.dispatcher,"res:".concat(r),s);case 17:return t.abrupt("return",t.sent);case 20:t.prev=20,t.t0=t["catch"](12);case 22:o++,t.next=11;break;case 25:throw new Error("Timeout waiting for command response");case 26:case"end":return t.stop()}}),t,this,[[12,20]])})));function r(e,r){return t.apply(this,arguments)}return r}()},{key:"check",value:function(e){var t=e.val,r=e.data;if(r.length<this.STATUS_BYTES_LENGTH)throw new Error("Only got ".concat(r.length," byte status response."));var n=r.slice(0,this.STATUS_BYTES_LENGTH);if(0!=n[0])throw new Error("Command failed: ".concat(n.toString("hex")));return r.length>this.STATUS_BYTES_LENGTH?r.slice(this.STATUS_BYTES_LENGTH):t}},{key:"sync",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.concat([e.from([7,7,18,32]),e.alloc(32,85)]),t.next=3,this.command(this.ESP_SYNC,r);case 3:return n=t.sent,a=n.val,t.abrupt("return",a);case 6:case"end":return t.stop()}}),t,this)})));function r(){return t.apply(this,arguments)}return r}()},{key:"_bootloader_reset",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a,s,c,u,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u=o.length>0&&void 0!==o[0]&&o[0],e.next=3,null===(t=this.port)||void 0===t?void 0:t.setSignals((r={},Object(i["a"])(r,m,!1),Object(i["a"])(r,E,!0),r));case 3:return e.next=5,Object(d["a"])(100);case 5:if(!u){e.next=8;break}return e.next=8,Object(d["a"])(1200);case 8:return e.next=10,null===(n=this.port)||void 0===n?void 0:n.setSignals((a={},Object(i["a"])(a,m,!0),Object(i["a"])(a,E,!1),a));case 10:if(!u){e.next=13;break}return e.next=13,Object(d["a"])(400);case 13:return e.next=15,Object(d["a"])(50);case 15:return e.next=17,null===(s=this.port)||void 0===s?void 0:s.setSignals((c={},Object(i["a"])(c,m,!1),Object(i["a"])(c,E,!1),c));case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_bootloader_reset_usb",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.port)||void 0===t?void 0:t.setSignals((r={},Object(i["a"])(r,m,!0),Object(i["a"])(r,E,!1),r));case 2:return e.next=4,Object(d["a"])(100);case 4:return e.next=6,null===(n=this.port)||void 0===n?void 0:n.setSignals((a={},Object(i["a"])(a,m,!1),Object(i["a"])(a,E,!0),a));case 6:return e.next=8,Object(d["a"])(100);case 8:return e.next=10,null===(s=this.port)||void 0===s?void 0:s.setSignals((c={},Object(i["a"])(c,m,!1),Object(i["a"])(c,E,!1),c));case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_connect_attempt",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],!this.usb_jtag_serial){e.next=6;break}return e.next=4,this._bootloader_reset_usb();case 4:e.next=8;break;case 6:return e.next=8,this._bootloader_reset(t);case 8:r=0;case 9:if(!(r<5)){e.next=23;break}return e.prev=10,e.next=13,this.sync();case 13:return e.abrupt("return",!0);case 16:return e.prev=16,e.t0=e["catch"](10),e.next=20,Object(d["a"])(50);case 20:r++,e.next=9;break;case 23:return e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,this,[[10,16]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"connect",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=s.length>0&&void 0!==s[0]?s[0]:7,(null===(t=this.port)||void 0===t||null===(r=t.getInfo())||void 0===r?void 0:r.usbProductId)==this.USB_JTAG_SERIAL_PID&&(this.usb_jtag_serial=!0,console.log("Detected integrated USB Serial/JTAG")),a=0;case 3:if(!(a<n)){e.next=22;break}return e.prev=4,e.next=7,this._connect_attempt(!1);case 7:if(!e.sent){e.next=11;break}return e.abrupt("return",!0);case 11:return e.next=13,this._connect_attempt(!0);case 13:if(!e.sent){e.next=15;break}return e.abrupt("return",!0);case 15:e.next=19;break;case 17:e.prev=17,e.t0=e["catch"](4);case 19:a++,e.next=3;break;case 22:return e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e,this,[[4,17]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"read_reg",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){var n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.alloc(4),n.writeUInt32LE(r,0),t.next=4,this.command(this.ESP_READ_REG,n);case 4:return a=t.sent,s=a.val,t.abrupt("return",s);case 7:case"end":return t.stop()}}),t,this)})));function r(e){return t.apply(this,arguments)}return r}()},{key:"get_chip_description",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("Not supported");case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_erase_size",value:function(e,t){return t}},{key:"_checksum",value:function(e){var t,r=this.ESP_CHECKSUM_MAGIC,a=Object(n["a"])(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;r^=s}}catch(c){a.e(c)}finally{a.f()}return r}},{key:"mem_begin",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r,n,a,s){var c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return c=e.alloc(16),c.writeUInt32LE(r,0),c.writeUInt32LE(n,4),c.writeUInt32LE(a,8),c.writeUInt32LE(s,12),t.t0=this,t.next=8,this.command(this.ESP_MEM_BEGIN,c,0,5e3,1);case 8:t.t1=t.sent,t.t0.check.call(t.t0,t.t1);case 10:case"end":return t.stop()}}),t,this)})));function r(e,r,n,a){return t.apply(this,arguments)}return r}()},{key:"mem_block",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r,n){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.alloc(16),a.writeUInt32LE(r.length,0),a.writeUInt32LE(n,4),a.writeUInt32LE(0,8),a.writeUInt32LE(0,12),s=e.concat([a,r]),t.t0=this,t.next=9,this.command(this.ESP_MEM_DATA,s,this._checksum(r),5e3,1);case 9:t.t1=t.sent,t.t0.check.call(t.t0,t.t1);case 11:case"end":return t.stop()}}),t,this)})));function r(e,r){return t.apply(this,arguments)}return r}()},{key:"mem_finish",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:0,n=e.alloc(8),n.writeUInt32LE(0==r?1:0,0),n.writeUInt32LE(r,4),t.t0=this,t.next=7,this.command(this.ESP_MEM_END,n,0,50,1);case 7:t.t1=t.sent,t.t0.check.call(t.t0,t.t1);case 9:case"end":return t.stop()}}),t,this)})));function r(){return t.apply(this,arguments)}return r}()},{key:"flash_begin",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r,n){var a,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Math.floor((r+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),s=this.get_erase_size(n,r),c=e.alloc(16),c.writeUInt32LE(s,0),c.writeUInt32LE(a,4),c.writeUInt32LE(this.FLASH_WRITE_SIZE,8),c.writeUInt32LE(n,12),t.t0=this,t.next=10,this.command(this.ESP_FLASH_BEGIN,c,0,5e3,1);case 10:return t.t1=t.sent,t.t0.check.call(t.t0,t.t1),t.abrupt("return",a);case 13:case"end":return t.stop()}}),t,this)})));function r(e,r){return t.apply(this,arguments)}return r}()},{key:"flash_block",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r,n){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.alloc(16),a.writeUInt32LE(r.length,0),a.writeUInt32LE(n,4),a.writeUInt32LE(0,8),a.writeUInt32LE(0,12),s=e.concat([a,r]),t.t0=this,t.next=9,this.command(this.ESP_FLASH_DATA,s,this._checksum(r),5e3,1);case 9:t.t1=t.sent,t.t0.check.call(t.t0,t.t1);case 11:case"end":return t.stop()}}),t,this)})));function r(e,r){return t.apply(this,arguments)}return r}()},{key:"flash_finish",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]&&a[0],n=e.alloc(4),n.writeUInt32LE(r?0:1,0),t.t0=this,t.next=6,this.command(this.ESP_FLASH_END,n);case 6:t.t1=t.sent,t.t0.check.call(t.t0,t.t1);case 8:case"end":return t.stop()}}),t,this)})));function r(){return t.apply(this,arguments)}return r}()},{key:"flash_defl_begin",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r,n,a){var s,c,i,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=Math.floor((n+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),c=Math.floor((r+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),i=this.IS_STUB?r:c*this.FLASH_WRITE_SIZE,console.log("Comporessed ".concat(r," bytes to ").concat(n,"...")),u=e.alloc(16),u.writeUInt32LE(i,0),u.writeUInt32LE(s,4),u.writeUInt32LE(this.FLASH_WRITE_SIZE,8),u.writeUInt32LE(a,12),t.t0=this,t.next=12,this.command(this.ESP_FLASH_DEFL_BEGIN,u,0,5e3,1);case 12:return t.t1=t.sent,t.t0.check.call(t.t0,t.t1),t.abrupt("return",s);case 15:case"end":return t.stop()}}),t,this)})));function r(e,r,n){return t.apply(this,arguments)}return r}()},{key:"flash_defl_block",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r,n){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.alloc(16),a.writeUInt32LE(r.length,0),a.writeUInt32LE(n,4),a.writeUInt32LE(0,8),a.writeUInt32LE(0,12),s=e.concat([a,r]),t.t0=this,t.next=9,this.command(this.ESP_FLASH_DEFL_DATA,s,this._checksum(r),5e3,1);case 9:t.t1=t.sent,t.t0.check.call(t.t0,t.t1);case 11:case"end":return t.stop()}}),t,this)})));function r(e,r){return t.apply(this,arguments)}return r}()},{key:"flash_defl_finish",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]&&a[0],n=e.alloc(4),n.writeUInt32LE(r?0:1,0),t.t0=this,t.next=6,this.command(this.ESP_FLASH_DEFL_END,n);case 6:t.t1=t.sent,t.t0.check.call(t.t0,t.t1);case 8:case"end":return t.stop()}}),t,this)})));function r(){return t.apply(this,arguments)}return r}()},{key:"_pad_image",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,a=t.length%r;return 0!=a&&(t=e.concat([t,e.alloc(a,n)])),t}},{key:"_parse_flash_size_arg",value:function(e){if(this.FLASH_SIZES[e])return this.FLASH_SIZES[e];var t=Object.keys(this.FLASH_SIZES).join(", ");throw new Error("Flash size '".concat(e,"' is not supported by this chip type. Supported sizes: ").concat(t))}},{key:"load_stub",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"run_stub",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s,c,i,u,o,l,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.load_stub();case 2:if(r=t.sent,r){t.next=5;break}return t.abrupt("return",null);case 5:console.log("Uploading stub..."),n=0,a=["text","data"];case 7:if(!(n<a.length)){t.next=30;break}if(s=a[n],r[s]){t.next=11;break}return t.abrupt("continue",27);case 11:return c=r["".concat(s,"_start")],t.next=14,v(e.from(r[s],"base64"));case 14:return i=t.sent,u=Math.floor((i.length+this.ESP_RAM_BLOCK-1)/this.ESP_RAM_BLOCK),t.next=18,this.mem_begin(i.length,u,this.ESP_RAM_BLOCK,c);case 18:o=0;case 19:if(!(o<u)){t.next=27;break}return l=o*this.ESP_RAM_BLOCK,h=l+this.ESP_RAM_BLOCK,t.next=24,this.mem_block(i.slice(l,h),o);case 24:o++,t.next=19;break;case 27:n++,t.next=7;break;case 30:return console.log("Running stub..."),t.next=33,this.mem_finish(r["entry"]);case 33:return t.next=35,Object(d["a"])(500);case 35:return console.log("Stub running..."),t.abrupt("return",new this.STUB_CLASS(this.port));case 37:case"end":return t.stop()}}),t,this)})));function r(){return t.apply(this,arguments)}return r}()},{key:"change_baud",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r,n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Changing baud rate from ".concat(n," to ").concat(r)),a=e.alloc(8),a.writeUInt32LE(r,0),a.writeUInt32LE(this.IS_STUB?n:0,4),t.next=6,this.command(this.ESP_CHANGE_BAUDRATE,a);case 6:console.log("Changed.");case 7:case"end":return t.stop()}}),t,this)})));function r(e,r){return t.apply(this,arguments)}return r}()},{key:"_update_image_flash_params",value:function(e,t,r){if(e!=this.BOOTLOADER_FLASH_OFFSET)return r;var n=r[0],a=r[2],s=15&r[3],c=240&r[3];return n!=this.ESP_IMAGE_MAGIC?(console.warn("Warning: Image file at ".concat(e," doesn't look like an image file, so not changing any flash settings.")),r):(t.flashMode&&"keep"!=t.flashMode&&(a={qio:0,qout:1,dio:2,dout:3}[t.flashMode]),t.flashFreq&&"keep"!=t.flashFreq&&(s={"40m":0,"26m":1,"20m":2,"80m":15}[t.flashFreq]),t.flashSize&&"keep"!=t.flashSize&&(c=this._parse_flash_size_arg(t.flashSize)),r[2]=a,r[3]=s|c,r)}},{key:"flash",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(r,n){var a,s,c,i,u,o,l,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<r.partitions.length)){e.next=50;break}if(s=r.partitions[a].address,c=r.partitions[a].image,console.log("Part ".concat(a,": address=").concat(Object(b["a"])(s,4)," size=").concat(c.length)),c=this._pad_image(c,4),0!=c.length){e.next=9;break}return console.warn("Skipped empty part ".concat(a," address=").concat(Object(b["a"])(s,4))),e.abrupt("continue",47);case 9:if(c=this._update_image_flash_params(s,r,c),i=void 0,!this.COMPRESS){e.next=21;break}return u=c.length,e.next=15,g(c,{level:9});case 15:return c=e.sent,e.next=18,this.flash_defl_begin(u,c.length,s);case 18:i=e.sent,e.next=24;break;case 21:return e.next=23,this.flash_begin(c.length,s);case 23:i=e.sent;case 24:o=0,l=0;case 26:if(!(c.length>0)){e.next=43;break}if(h=c.slice(0,this.FLASH_WRITE_SIZE),!this.COMPRESS){e.next=34;break}return console.log("Writing... (".concat(Math.round((o+1)/i*100),"%)")),e.next=32,this.flash_defl_block(h,o);case 32:e.next=37;break;case 34:return console.log("Writing at ".concat(Object(b["a"])(s+l,4),"... (").concat(Math.round((o+1)/i*100),"%)")),e.next=37,this.flash_block(h,o);case 37:c=c.slice(this.FLASH_WRITE_SIZE),o+=1,l+=h.length,n({index:a,blocks_written:o+1,blocks_total:i}),e.next=26;break;case 43:if(!this.IS_STUB){e.next=46;break}return e.next=46,this.read_reg(t.CHIP_DETECT_MAGIC_REG_ADDR);case 46:console.log("Wrote ".concat(l," bytes"));case 47:a++,e.next=1;break;case 50:if(console.log("Leaving..."),!this.IS_STUB){e.next=61;break}return e.next=54,this.flash_begin(0,0);case 54:if(!this.COMPRESS){e.next=59;break}return e.next=57,this.flash_defl_finish(!1);case 57:e.next=61;break;case 59:return e.next=61,this.flash_finish(!1);case 61:case"end":return e.stop()}}),e,this)})));function r(t,r){return e.apply(this,arguments)}return r}()},{key:"hard_reset",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.port)||void 0===t?void 0:t.setSignals((r={},Object(i["a"])(r,m,!1),Object(i["a"])(r,E,!0),r));case 2:return e.next=4,Object(d["a"])(100);case 4:return e.next=6,null===(n=this.port)||void 0===n?void 0:n.setSignals((a={},Object(i["a"])(a,m,!1),Object(i["a"])(a,E,!1),a));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),t}();Object(i["a"])(O,"TRACE",!1),Object(i["a"])(O,"CHIP_DETECT_MAGIC_REG_ADDR",1073745920)}).call(this,r("b639").Buffer)},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=r("f23d"),s=(r("202f"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{attrs:{id:"app"}},[r("h1",[e._v("Web ESPTool")]),r("div",{staticClass:"author"},[e._v("by XiNGRZ")]),null==e.progress?r("div",{staticClass:"main upload"},[r("a-upload-dragger",{staticClass:"uploader",attrs:{accept:".zip",showUploadList:!1,customRequest:function(t){var r=t.file;return e.handleFile(r)}}},[r("p",{staticClass:"ant-upload-drag-icon"},[r("a-icon",{attrs:{type:e.file?"file-zip":"inbox"}})],1),e.file?r("p",{staticClass:"ant-upload-text file"},[e._v(e._s(e.file.name))]):r("p",{staticClass:"ant-upload-text"},[e._v("点击选择或将固件包拖放到此处")])])],1):e._e(),null!=e.progress?r("div",{staticClass:"main progress"},[r("a-progress",{attrs:{type:"circle",width:150,strokeWidth:4,percent:e.progress,status:e.progress>=100?"success":"active",format:e.formatProgress}})],1):e._e(),r("div",{staticClass:"buttons"},["flashing"!=e.state?r("a-button",{attrs:{size:"large",type:"primary",disabled:!e.file,loading:"connecting"==e.state},on:{click:e.start}},[e._v("开始烧录")]):e._e()],1)]),e._m(0)])}),c=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"footer"},[r("div",[e._v("Copyright © 2021 XiNGRZ")]),r("div",[r("a",{attrs:{href:"https://github.com/xingrz/web-esptool"}},[e._v("Fork me on GitHub")])])])}],i=r("1da1"),u=r("d4ec"),o=r("bee2"),l=r("257e"),h=r("262e"),f=r("2caf"),b=r("ade3"),p=(r("96cf"),r("99af"),r("d81d"),r("9ab4")),d=r("1b40"),_=r("ef3e"),j=r("b85c"),v=(r("caad"),r("2532"),r("faa1")),g=r.n(v),m=r("c6c3"),E=(r("d3b7"),r("3ca3"),r("ddb0"),function(e){Object(h["a"])(n,e);var t=Object(f["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),Object(b["a"])(Object(l["a"])(e),"CHIP_NAME","ESP8266"),Object(b["a"])(Object(l["a"])(e),"IS_STUB",!1),Object(b["a"])(Object(l["a"])(e),"FLASH_SIZES",{"512KB":0,"256KB":16,"1MB":32,"2MB":48,"4MB":64,"2MB-c1":80,"4MB-c1":96,"8MB":128,"16MB":144}),Object(b["a"])(Object(l["a"])(e),"BOOTLOADER_FLASH_OFFSET",0),Object(b["a"])(Object(l["a"])(e),"STUB_CLASS",O),e}return Object(o["a"])(n,[{key:"load_stub",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.e("stub_flasher_8266").then(r.t.bind(null,"31d9",7));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_efuses",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.read_reg(1072693328);case 2:return e.t0=e.sent,e.next=5,this.read_reg(1072693332);case 5:return e.t1=e.sent,e.next=8,this.read_reg(1072693336);case 8:return e.t2=e.sent,e.next=11,this.read_reg(1072693340);case 11:return e.t3=e.sent,e.abrupt("return",[e.t0,e.t1,e.t2,e.t3]);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_get_flash_size",value:function(e){var t=16&e[0],r=e[3]&1<<25,n=e[3]&1<<26,a=e[3]&1<<27;if(t&&!r){if(!a&&!n)return 1;if(!a&&n)return 2}if(!t&&r){if(!a&&!n)return 2;if(!a&&n)return 4}return-1}},{key:"get_chip_description",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.get_efuses();case 2:if(t=e.sent,!(16&t[0]||65536&t[2])){e.next=10;break}return r=this._get_flash_size(t),n=32&t[0],a={1:n?"ESP8285H08":"ESP8285N08",2:n?"ESP8285H16":"ESP8285N16"}[r]||"ESP8285",e.abrupt("return",a);case 10:return e.abrupt("return","ESP8266EX");case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_erase_size",value:function(e,t){var r=16,n=this.FLASH_SECTOR_SIZE,a=Math.floor((t+n-1)/n),s=Math.floor(e/n),c=r-s%r;return a<c&&(c=a),a<2*c?Math.floor((a+1)/2)*n:(a-c)*n}}]),n}(m["a"]));Object(b["a"])(E,"CHIP_DETECT_MAGIC_VALUE",[4293968129]);var O=function(e){Object(h["a"])(r,e);var t=Object(f["a"])(r);function r(){var e;Object(u["a"])(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),Object(b["a"])(Object(l["a"])(e),"FLASH_WRITE_SIZE",16384),Object(b["a"])(Object(l["a"])(e),"IS_STUB",!0),e}return Object(o["a"])(r,[{key:"get_erase_size",value:function(e,t){return t}}]),r}(E),S=(r("2ca0"),function(e){Object(h["a"])(n,e);var t=Object(f["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),Object(b["a"])(Object(l["a"])(e),"CHIP_NAME","ESP32"),Object(b["a"])(Object(l["a"])(e),"IS_STUB",!1),Object(b["a"])(Object(l["a"])(e),"STATUS_BYTES_LENGTH",4),Object(b["a"])(Object(l["a"])(e),"EFUSE_BLK0",1073061888),Object(b["a"])(Object(l["a"])(e),"DR_REG_SYSCON_BASE",1073111040),Object(b["a"])(Object(l["a"])(e),"FLASH_SIZES",{"1MB":0,"2MB":16,"4MB":32,"8MB":48,"16MB":64}),Object(b["a"])(Object(l["a"])(e),"BOOTLOADER_FLASH_OFFSET",4096),Object(b["a"])(Object(l["a"])(e),"STUB_CLASS",w),e}return Object(o["a"])(n,[{key:"load_stub",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.e("stub_flasher_32").then(r.t.bind(null,"3a46",7));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"read_efuse",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.read_reg(t+4*r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"get_pkg_version",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.read_efuse(this.EFUSE_BLK0,3);case 2:return t=e.sent,e.abrupt("return",(t>>9&7)+((t>>2&1)<<3));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_chip_revision",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.read_efuse(this.EFUSE_BLK0,3);case 2:return t=e.sent,e.next=5,this.read_efuse(this.EFUSE_BLK0,5);case 5:return r=e.sent,e.next=8,this.read_reg(this.DR_REG_SYSCON_BASE+124);case 8:if(n=e.sent,a=t>>15&1,s=r>>20&1,c=n>>31&1,a){e.next=14;break}return e.abrupt("return",0);case 14:if(s){e.next=16;break}return e.abrupt("return",1);case 16:if(c){e.next=18;break}return e.abrupt("return",2);case 18:return e.abrupt("return",3);case 19:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_chip_description",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.get_pkg_version();case 2:return t=e.sent,e.next=5,this.get_chip_revision();case 5:return r=e.sent,n=3==r,e.next=9,this.read_efuse(this.EFUSE_BLK0,3);case 9:return e.t0=e.sent,e.t1=1,a=e.t0&e.t1,s={0:a?"ESP32-S0WDQ6":"ESP32-D0WDQ6",1:a?"ESP32-S0WD":"ESP32-D0WD",2:"ESP32-D2WD",4:"ESP32-U4WDH",5:n?"ESP32-PICO-V3":"ESP32-PICO-D4",6:"ESP32-PICO-V3-02"}[t]||"unknown ESP32",s.startsWith("ESP32-D0WD")&&n&&(s+="-V3"),e.abrupt("return","".concat(s," (revision ").concat(r,")"));case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(m["a"]));Object(b["a"])(S,"CHIP_DETECT_MAGIC_VALUE",[15736195]);var w=function(e){Object(h["a"])(r,e);var t=Object(f["a"])(r);function r(){var e;Object(u["a"])(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),Object(b["a"])(Object(l["a"])(e),"FLASH_WRITE_SIZE",16384),Object(b["a"])(Object(l["a"])(e),"STATUS_BYTES_LENGTH",2),Object(b["a"])(Object(l["a"])(e),"IS_STUB",!0),e}return r}(S),k=function(e){Object(h["a"])(n,e);var t=Object(f["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),Object(b["a"])(Object(l["a"])(e),"CHIP_NAME","ESP32-S2"),Object(b["a"])(Object(l["a"])(e),"EFUSE_BASE",1061265408),Object(b["a"])(Object(l["a"])(e),"EFUSE_BLK0",e.EFUSE_BASE+48),Object(b["a"])(Object(l["a"])(e),"EFUSE_BLK1",e.EFUSE_BASE+68),Object(b["a"])(Object(l["a"])(e),"STUB_CLASS",x),e}return Object(o["a"])(n,[{key:"load_stub",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.e("stub_flasher_32s2").then(r.t.bind(null,"bb9a",7));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_pkg_version",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.read_efuse(this.EFUSE_BLK1,3);case 2:return t=e.sent,e.abrupt("return",t>>21&15);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_chip_description",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.get_pkg_version();case 2:if(e.t1=e.sent,e.t0={0:"ESP32-S2",1:"ESP32-S2FH16",2:"ESP32-S2FH32"}[e.t1],e.t0){e.next=6;break}e.t0="unknown ESP32-S2";case 6:return e.abrupt("return",e.t0);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(S);Object(b["a"])(k,"CHIP_DETECT_MAGIC_VALUE",[1990]);var x=function(e){Object(h["a"])(r,e);var t=Object(f["a"])(r);function r(){var e;Object(u["a"])(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),Object(b["a"])(Object(l["a"])(e),"FLASH_WRITE_SIZE",16384),Object(b["a"])(Object(l["a"])(e),"STATUS_BYTES_LENGTH",2),Object(b["a"])(Object(l["a"])(e),"IS_STUB",!0),e}return r}(k),y=function(e){Object(h["a"])(n,e);var t=Object(f["a"])(n);function n(){var e;Object(u["a"])(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),Object(b["a"])(Object(l["a"])(e),"CHIP_NAME","ESP32-C3"),Object(b["a"])(Object(l["a"])(e),"EFUSE_BASE",1610647552),Object(b["a"])(Object(l["a"])(e),"EFUSE_BLK0",e.EFUSE_BASE+48),Object(b["a"])(Object(l["a"])(e),"EFUSE_BLK1",e.EFUSE_BASE+68),Object(b["a"])(Object(l["a"])(e),"STUB_CLASS",R),e}return Object(o["a"])(n,[{key:"load_stub",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.e("stub_flasher_32c3").then(r.t.bind(null,"e316",7));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_pkg_version",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.read_efuse(this.EFUSE_BLK1,3);case 2:return t=e.sent,e.abrupt("return",t>>21&7);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_chip_revision",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.read_efuse(this.EFUSE_BLK1,3);case 2:return t=e.sent,e.abrupt("return",t>>18&7);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"get_chip_description",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.get_pkg_version();case 2:if(e.t1=e.sent,e.t0={0:"ESP32-C3"}[e.t1],e.t0){e.next=6;break}e.t0="unknown ESP32-C3";case 6:return t=e.t0,e.next=9,this.get_chip_revision();case 9:return r=e.sent,e.abrupt("return","".concat(t," (revision ").concat(r,")"));case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(S);Object(b["a"])(y,"CHIP_DETECT_MAGIC_VALUE",[1763790959,456216687]);var R=function(e){Object(h["a"])(r,e);var t=Object(f["a"])(r);function r(){var e;Object(u["a"])(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),Object(b["a"])(Object(l["a"])(e),"FLASH_WRITE_SIZE",16384),Object(b["a"])(Object(l["a"])(e),"STATUS_BYTES_LENGTH",2),Object(b["a"])(Object(l["a"])(e),"IS_STUB",!0),e}return r}(y),A=r("59b6"),L=115200,I=96e4,T=[E,S,k,y],P=function(e){Object(h["a"])(r,e);var t=Object(f["a"])(r);function r(){var e;Object(u["a"])(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),Object(b["a"])(Object(l["a"])(e),"serial",null),Object(b["a"])(Object(l["a"])(e),"loader",null),e}return Object(o["a"])(r,[{key:"open",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,s,c,i,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.serial=t,e.prev=1,e.next=4,t.open({baudRate:L});case 4:return r=new m["a"](t),r.start(),e.next=8,r.connect();case 8:return e.next=10,r.read_reg(m["a"].CHIP_DETECT_MAGIC_REG_ADDR);case 10:n=e.sent,a=Object(j["a"])(T);try{for(a.s();!(s=a.n()).done;)c=s.value,c.CHIP_DETECT_MAGIC_VALUE.includes(n)&&(this.loader=new c(t))}catch(o){a.e(o)}finally{a.f()}return e.next=15,r.release();case 15:if(this.loader){e.next=17;break}throw new Error("Unsupported chip");case 17:return this.loader.start(),e.next=20,this.loader.get_chip_description();case 20:return i=e.sent,console.log("Detected ".concat(i)),this.emit("connect",{chip_description:i}),e.next=25,this.loader.run_stub();case 25:if(u=e.sent,u){e.next=28;break}return e.abrupt("return");case 28:return e.next=30,this.loader.release();case 30:return this.loader=u,this.loader.start(),e.next=34,this.loader.change_baud(I,L);case 34:return e.next=36,Object(A["a"])(100);case 36:return e.next=38,this.loader.release();case 38:return e.next=40,t.close();case 40:return e.next=42,t.open({baudRate:I});case 42:this.loader.start(),e.next=52;break;case 45:return e.prev=45,e.t0=e["catch"](1),console.warn("Failed launching loader",e.t0),e.next=50,t.close();case 50:throw this.serial=null,e.t0;case 52:case"end":return e.stop()}}),e,this,[[1,45]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"close",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.loader){e.next=4;break}return e.next=3,this.loader.release();case 3:this.loader=null;case 4:if(!this.serial){e.next=8;break}return e.next=7,this.serial.close();case 7:this.serial=null;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"flash",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,n,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,null===(r=this.loader)||void 0===r?void 0:r.flash(t,(function(e){return a.emit("progress",e)}));case 2:return e.next=4,null===(n=this.loader)||void 0===n?void 0:n.hard_reset();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(g.a),U=P,B=16777216,C=function(e){Object(h["a"])(r,e);var t=Object(f["a"])(r);function r(){var e;Object(u["a"])(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),Object(b["a"])(Object(l["a"])(e),"file",null),Object(b["a"])(Object(l["a"])(e),"progress",null),Object(b["a"])(Object(l["a"])(e),"imageSizes",[]),Object(b["a"])(Object(l["a"])(e),"imageSizesTotal",0),Object(b["a"])(Object(l["a"])(e),"state","idle"),Object(b["a"])(Object(l["a"])(e),"flashArgs",void 0),Object(b["a"])(Object(l["a"])(e),"esp",void 0),e}return Object(o["a"])(r,[{key:"mounted",value:function(){var e=this;this.esp=new U,this.esp.on("connect",(function(t){var r=t.chip_description;console.log("Connected: ".concat(r)),e.$message.success("已连接：".concat(r))})),this.esp.on("progress",(function(t){for(var r=t.index,n=t.blocks_written,a=t.blocks_total,s=0,c=0;c<r;c++)s+=e.imageSizes[c];var i=s+e.imageSizes[r]*(n/a);e.progress=i/e.imageSizesTotal*100}))}},{key:"handleFile",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.size>=B)){e.next=3;break}return this.$message.error("文件过大: ".concat(Math.round(t.size/1024/1024)," MB")),e.abrupt("return");case 3:return e.next=5,Object(_["a"])(t);case 5:if(r=e.sent,null!=r){e.next=9;break}return this.$message.error("该文件不是一个合法的固件包"),e.abrupt("return");case 9:this.file=t,this.flashArgs=r,this.imageSizes=r.partitions.map((function(e){var t=e.image;return t.length})),this.imageSizesTotal=this.imageSizes.reduce((function(e,t){return e+t}),0);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"start",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.state="connecting",this.progress=0,e.prev=2,e.next=5,navigator.serial.requestPort();case 5:return n=e.sent,e.next=8,null===(r=this.esp)||void 0===r?void 0:r.open(n);case 8:e.next=15;break;case 10:return e.prev=10,e.t0=e["catch"](2),this.$message.error("设备打开失败"),this.state="idle",e.abrupt("return");case 15:return this.state="flashing",e.prev=16,e.next=19,null===(a=this.esp)||void 0===a?void 0:a.flash(this.flashArgs);case 19:e.next=25;break;case 21:e.prev=21,e.t1=e["catch"](16),console.error(e.t1),this.$message.error("烧录失败");case 25:return e.next=27,null===(t=this.esp)||void 0===t?void 0:t.close();case 27:console.log("done"),this.state="idle";case 29:case"end":return e.stop()}}),e,this,[[2,10],[16,21]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"formatProgress",value:function(){return this.progress>=100?"完成":"".concat(Math.floor(this.progress),"%")}}]),r}(d["b"]);C=Object(p["a"])([d["a"]],C);var F=C,M=F,H=(r("034f"),r("2877")),D=Object(H["a"])(M,s,c,!1,null,null,null),z=D.exports;n["a"].config.productionTip=!1,n["a"].use(a["a"]),new n["a"]({render:function(e){return e(z)}}).$mount("#app")},eb8c:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return n}));r("fb6a");function n(t){var r=e.alloc(2*t.length+2);r[0]=192;for(var n=1,a=0;a<t.length;a++)192==t[a]?(r[n]=219,r[n+1]=220,n+=2):219==t[a]?(r[n]=219,r[n+1]=221,n+=2):(r[n]=t[a],n+=1);return r[n]=192,r.slice(0,n+1)}}).call(this,r("b639").Buffer)},ef3e:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return s}));var n=r("1da1"),a=(r("96cf"),r("ac1f"),r("466d"),r("4d63"),r("25f0"),r("4de4"),r("d81d"),r("1276"),r("5319"),r("d3b7"),r("498a"),r("99af"),r("9431"));function s(e){return c.apply(this,arguments)}function c(){return c=Object(n["a"])(regeneratorRuntime.mark((function t(r){var n,s,c,u,o,l,h,f,b,p,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(a["a"])(r);case 2:if(n=t.sent,s=i(n)||{},c=s.dir,u=s.content,u){t.next=6;break}return t.abrupt("return",null);case 6:for(o=e.from(u).toString().replace(/\n/g," ").split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e})),l={flashMode:"qio",partitions:[]},h=0;h<o.length-1;h++)"--flash_mode"==o[h]?l.flashMode=o[h+1]:o[h].match(/^0x([A-Fa-f0-9]+)$/)?(f=parseInt(RegExp.$1,16),b="".concat(c,"/").concat(o[h+1]),n[b]&&l.partitions.push({address:f,image:n[b]})):o[h].match(/^([0-9]+)$/)&&(p=parseInt(RegExp.$1),d="".concat(c,"/").concat(o[h+1]),n[d]&&l.partitions.push({address:p,image:n[d]}));return t.abrupt("return",l);case 10:case"end":return t.stop()}}),t)}))),c.apply(this,arguments)}function i(e){for(var t in e)if(t.match(/^(.*)\/flash_args$/))return{dir:RegExp.$1,content:e[t]};return null}}).call(this,r("b639").Buffer)}});
//# sourceMappingURL=app.ca94dbc1.js.map